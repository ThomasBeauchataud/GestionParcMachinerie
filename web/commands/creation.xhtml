<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>
    <link rel="stylesheet" type="text/css" href="#{navigationController.applicationUrl}css/home.css"/>
    <link rel="stylesheet" type="text/css" href="#{navigationController.applicationUrl}css/common.css"/>
</h:head>
<h:body>

    <header>
        <ui:include src="/authenticated-header.xhtml" />
    </header>

    <p:outputLabel value="Basket"/>
    <div class="datatable">
        <p:dataTable var="machineCatalog" id="table" value="#{commandCreation.basket}">
            <f:facet name="header">
                Command List
            </f:facet>

            <p:column headerText="Model">
                <h:outputText value="#{machineCatalog.model}" />
            </p:column>

            <p:column headerText="Count">
                <h:outputText value="#{machineCatalog.number}" />
            </p:column>

            <p:column headerText="From">
                <h:outputText value="#{machineCatalog.from}" />
            </p:column>

            <p:column headerText="To">
                <h:outputText value="#{machineCatalog.to}" />
            </p:column>

        </p:dataTable>
    </div><br/><br/>

    <h:form id="search">
        <p:outputPanel style="horiz-align: right; display: inline-block;">
            <h:outputText value="Machine Catalog Search: " />
            <p:inputText value="#{commandCreation.filterValue}">
                <p:ajax event="keyup" update="grid" listener="#{commandCreation.filter()}" />
            </p:inputText>
        </p:outputPanel>
    </h:form>

        <p:dataGrid var="machineCatalog" value="#{commandCreation.machineCatalogFiltered}" columns="6" layout="grid"
                    rows="12" paginator="true" id="grid"
                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">

            <f:facet name="header">
                <p:outputLabel value="Machine Catalog"/>
            </f:facet>


            <p:panel header="#{machineCatalog.model}" style="text-align:center"><h:form id="form">
                <h:panelGrid columns="1" style="width:100%">

                    <h:outputText value="Count: (Max = #{commandCreation.maxValue(machineCatalog)})"/>
                    <p:inputNumber id="count" value="#{commandCreation.count}" minValue="0" maxValue="#{commandCreation.maxValue(machineCatalog)}" required="true"/>

                    <h:outputText value="From: "/>
                    <p:calendar id="from" value="#{commandCreation.from}" required="true">
                        <p:ajax event="dateSelect" update="count"/>
                    </p:calendar>

                    <h:outputText value="To: "/>
                    <p:calendar id="to" value="#{commandCreation.to}" required="true"/>

                    <p:commandButton id="ajax" update="table" action="#{commandCreation.add(machineCatalog)}" value="Add"/>

                </h:panelGrid></h:form>
            </p:panel>
        </p:dataGrid><br/>

        <p:commandButton type="submit" id="execute" action="#{commandCreation.execute()}" value="Confirm"/>

</h:body>
</html>
